(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(3);window.interval=300;class i{constructor(){this.active=!1,this.freq=440,this.synth=r.b.new(),this.synth.set_freq(this.freq),this.bufferLength=2048,this.buffer=new Float64Array(this.bufferLength)}initAudio(){this.audioContext=this.getWindowAudioContext(),this.customWaveform=this.audioContext.createScriptProcessor(this.bufferLength,0,1)}getWindowAudioContext(){return window.AudioContext=window.AudioContext||window.webkitAudioContext,new AudioContext}play(){if(void 0===this.audioContext&&this.initAudio(),!!this.noteToggleTimer)this.cancelPlayTimer(),this.customWaveform.disconnect(this.audioContext.destination);else{this.freq=440,this.synth.set_freq(this.freq),this.customWaveform.onaudioprocess=t=>{const e=t.outputBuffer.getChannelData(0);this.read();for(var n=0;n<e.length;n++)e[n]=this.buffer[n]},this.customWaveform.connect(this.audioContext.destination);let t=!1;this.noteToggleTimer=setInterval(()=>{t?this.noteOff():this.noteOn(),t=!t},interval)}}cancelPlayTimer(){this.noteToggleTimer&&(clearInterval(this.noteToggleTimer),this.noteOff(),this.noteToggleTimer=null)}read(){this.buffer?this.synth.read(this.buffer):console.error("cannot read as synth is not initialised")}noteOn(){this.active=!0,this.synth.note_on()}noteOff(){this.active=!1,this.synth.note_off()}toggle(){this.active?this.noteOff():this.noteOn()}incrFrequency(t){console.log({semitones:t}),console.log({before:this.freq});const e=void 0!==t?t/12:1/12;console.log({oct:e});const n=Math.pow(2,e);console.log({factor:n}),this.freq=this.freq*n,console.log({after:this.freq}),this.synth.set_freq(this.freq)}dispose(){this.synth&&this.synth.free(),this.synth=null}}const s=12,c="#04425a",l="#8bc0c1",u="#04425a";let a={value:null},f=null,h=null;function d(){console.time("synthread"),h.read(),console.timeEnd("synthread")}function g(t,e,n){return e*t+n}!function(){const t=r.c.new(),e=t.width(),n=t.height(),y=function(t,e){const n=document.getElementById("game-of-life-canvas");return n.height=(s+1)*e+1,n.width=(s+1)*t+1,n}(e,n).getContext("2d"),p={universe:t};(function(t,e){document.addEventListener("keydown",function(n){switch(n.key){case" ":t.isPlaying()?t.stop():t.start();break;case"n":t.isPlaying()&&t.stop(),t.isPlaying()||t.start(!0);break;case"c":t.isPlaying()&&t.stop(),e.universe.clear(),t.draw();break;case"r":t.isPlaying()&&t.stop(),e.universe.reset(),t.draw();break;case"s":!function(){console.time("synthing"),console.log("begining..."),d(),h.noteOn();for(let t=1;t<60;t++)d(),console.log(h.buffer);console.timeEnd("synthing"),console.log("done...")}();break;case"p":console.log("starting playing.."),h.play();break;case"P":console.log("stopping playing.."),h.cancelPlayTimer();break;case"z":h.incrFrequency(-1);break;case"x":h.incrFrequency(1);break;case"Z":h.incrFrequency(-2);break;case"X":h.incrFrequency(2)}n.shiftKey&&h.noteOn()}),document.addEventListener("keyup",function(t){t.shiftKey&&h.noteOff()}),document.addEventListener("mousedown",function(n){const r=n.offsetX,o=n.offsetY,{width:i,height:c}=t.size(),l=Math.floor(r/(s+1)),u=Math.floor(o/(s+1));0===n.button&&(e.universe.toggle(l,u),t.draw()),console.log({ix:l,iy:u}),console.log({width:i,height:c}),l<4&&h.play()})})(f=function(t,e,n,i,a){function f(t){t&&a.universe.tick(),h(),t||(e.value=requestAnimationFrame(d))}function h(){!function(t,e,n){t.beginPath(),t.strokeStyle=c;for(let r=0;r<=e;r++)t.moveTo(r*(s+1)+1,0),t.lineTo(r*(s+1)+1,(s+1)*n+1);for(let r=0;r<=n;r++)t.moveTo(0,r*(s+1)+1),t.lineTo((s+1)*e+1,r*(s+1)+1);t.stroke()}(t,n,i),function(t,e,n,i){const c=i.cells(),a=new Uint8Array(o.l.buffer,c,e*n);t.beginPath(),t.fillStyle=u;for(let o=0;o<n;o++)for(let n=0;n<e;n++)a[g(e,o,n)]!==r.a.Dead&&t.fillRect(n*(s+1)+1,o*(s+1)+1,s,s);t.fillStyle=l;for(let o=0;o<n;o++)for(let n=0;n<e;n++)a[g(e,o,n)]===r.a.Dead&&t.fillRect(n*(s+1)+1,o*(s+1)+1,s,s);t.stroke()}(t,n,i,a.universe)}function d(){a.universe.tick(),f()}return{start:f,stop:function(){cancelAnimationFrame(e.value),e.value=null},draw:h,isPlaying:function(){return null!==e.value},size:function(){return{width:n,height:i}}}}(y,a,e,n,p),p),f.start(),console.time("init synth"),h=new i,console.timeEnd("init synth")}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return v}),n.d(e,"h",function(){return m}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return q}),n.d(e,"g",function(){return A});var r=n(3);const o=Object.freeze({Dead:0,Alive:1});let i=null;function s(){return null!==i&&i.buffer===r.l.buffer||(i=new Float64Array(r.l.buffer)),i}let c=0;let l=new TextDecoder("utf-8"),u=null;function a(){return null!==u&&u.buffer===r.l.buffer||(u=new Uint8Array(r.l.buffer)),u}function f(t,e){return l.decode(a().subarray(t,t+e))}function h(t,e){let n=f(t,e);n=n.slice(),r.c(t,1*e),console.error(n)}const d=new Array(32);d.fill(void 0),d.push(void 0,null,!0,!1);let g=d.length;function y(){return function(t){g===d.length&&d.push(d.length+1);const e=g;return g=d[e],d[e]=t,e}(new Error)}let p,w=new TextEncoder("utf-8");p="function"==typeof w.encodeInto?function(t){let e=t.length,n=r.d(e),o=0;{const e=a();for(;o<t.length;o++){const r=t.charCodeAt(o);if(r>127)break;e[n+o]=r}}if(o!==t.length){t=t.slice(o),n=r.e(n,e,e=o+3*t.length);const i=a().subarray(n+o,n+e);o+=w.encodeInto(t,i).written}return c=o,n}:function(t){let e=t.length,n=r.d(e),o=0;{const e=a();for(;o<t.length;o++){const r=t.charCodeAt(o);if(r>127)break;e[n+o]=r}}if(o!==t.length){const i=w.encode(t.slice(o));n=r.e(n,e,e=o+i.length),a().set(i,n+o),o+=i.length}return c=o,n};let b=null;function v(t,e){const n=p((o=e,d[o]).stack);var o;const i=c,s=(null!==b&&b.buffer===r.l.buffer||(b=new Uint32Array(r.l.buffer)),b);s[t/4]=n,s[t/4+1]=i}function m(t,e){throw new Error(f(t,e))}class k{static __wrap(t){const e=Object.create(k.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.a(t)}(t)}static new(){return k.__wrap(r.f())}read(t){const e=function(t){const e=r.d(8*t.length);return s().set(t,e/8),c=t.length,e}(t),n=c;try{return r.i(this.ptr,e,n)}finally{t.set(s().subarray(e/8,e/8+n)),r.c(e,8*n)}}set_buffer_len(t){return r.j(this.ptr,t)}note_on(){return r.h(this.ptr)}note_off(){return r.g(this.ptr)}set_freq(t){return r.k(this.ptr,t)}}class q{static __wrap(t){const e=Object.create(q.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,function(t){r.b(t)}(t)}static new(){return q.__wrap(r.p())}width(){return r.u(this.ptr)>>>0}height(){return r.o(this.ptr)>>>0}set_size(t,e){return r.r(this.ptr,t,e)}cells(){return r.m(this.ptr)}reset(){return r.q(this.ptr)}clear(){return r.n(this.ptr)}toggle(t,e){return r.t(this.ptr,t,e)}tick(){return r.s(this.ptr)}}function A(t){var e;(e=t)<36||(d[e]=g,g=e)}},function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(2);r.v()}]]);